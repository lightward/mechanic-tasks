{
  "name": "Raise the price of a product after every sale",
  "options": {
    "product_id__required_number": null,
    "increase_price_by_this_much__number_required": null,
    "maximum_price__number": null
  },
  "subscriptions": [
    "shopify/orders/paid"
  ],
  "subscriptions_template": "shopify/orders/paid",
  "script": "{% assign purchased_variant = nil %}\n{% for line_item in order.line_items %}\n  {% if line_item.product_id == options.product_id__required_number %}\n    {% assign purchased_variant = line_item.variant %}\n    {% break %}\n  {% endif %}\n{% endfor %}\n\n{% if event.preview or purchased_variant %}\n  {% assign next_price = purchased_variant.price | plus: options.increase_price_by_this_much__number_required %}\n\n  {% unless event.preview != true and options.maximum_price__number != blank and next_price > options.maximum_price__number %}\n    {\n      \"action\": {\n        \"type\": \"shopify\",\n        \"options\": [\n          \"update\",\n          [\n            \"variant\",\n            {{ purchased_variant.id | json }}\n          ],\n          {\n            \"price\": {{ next_price | json }}\n          }\n        ]\n      }\n    }\n  {% endunless %}\n{% endif %}",
  "docs": null,
  "halt_action_run_sequence_on_error": false,
  "online_store_javascript": null,
  "order_status_javascript": null,
  "perform_action_runs_in_sequence": false
}
