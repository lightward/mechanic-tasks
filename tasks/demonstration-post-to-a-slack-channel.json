{
  "docs": "# Demonstration: Post to a Slack channel\n\nThis task posts a demonstration message in the Slack channel of your choice. Try it out to learn how the Slack action works!\n\n## Quick Start\n\n1. Install the Mechanic Slack app in your Slack workspace (Settings ‚Üí Authentication ‚Üí Slack)\n3. Set two task options:\n    - Your Slack account\n    - The Slack channel ID to post to\n      - If this is a private channel, then you must add the Mechanic bot to the channel before it can post messages\n4. Run the task\n\nLook in your Slack channel for the demonstration message. (Although you'll likely get a combination of app, email, and web notifications for this one post üòÇ)\n\n## Want to Learn More?\n\nThis task demonstrates how to:\n- Create a new message in an Slack channel\n- Build dynamic message structure with some common Slack block kit components: header, section, divider, button\n\nTake a look at the task code to see exactly how it works, then use this example in your own tasks.\n\nSlack has extensive API documentation covering the many endpoints this integration can utilize. In relation to this demo task, the following API docs are the most relevant:\n- https://docs.slack.dev/reference/methods/chat.postmessage\n- https://docs.slack.dev/messaging/\n- https://docs.slack.dev/block-kit/",
  "halt_action_run_sequence_on_error": false,
  "name": "Demonstration: Post to a Slack channel",
  "online_store_javascript": null,
  "options": {
    "slack_account__required": null,
    "slack_channel_id__required": null
  },
  "perform_action_runs_in_sequence": false,
  "preview_event_definitions": [],
  "script": "{% assign slack_account = options.slack_account__required %}\n{% assign slack_channel_id = options.slack_channel_id__required %}\n\n{% comment %}\n  IMPORTANT:\n  -- This task requires the Mechanic app for Slack be installed in your Slack instance\n  -- It will create a bot user - Mechanic - which the API actions will be made on behalf of\n  -- This bot can automatically post to any public channels, but it must be added to any private channels you wish to post to\n  -- Most Slack API errors will be surfaced by the integration, since the Slack convention is to return a 200 status even when there are errors\n\n  API REFERENCEs:\n  -- https://docs.slack.dev/reference/methods/chat.postmessage\n  -- https://docs.slack.dev/messaging/\n  -- https://docs.slack.dev/block-kit/\n{% endcomment %}\n\n{% if event.topic == \"mechanic/user/trigger\" %}\n  {% comment %}\n    ** Slack API - Post a new message **\n    -- This action will create a new message in the configured channel of the connected Slack account\n  {% endcomment %}\n\n  {% action \"slack\" %}\n    {\n      \"account\": {{ slack_account | json }},\n      \"method\": \"POST\",\n      \"url_path\": \"/chat.postMessage\",\n      \"headers\": {\n        \"Content-Type\": \"application/json\"\n      },\n      \"body\": {\n        \"channel\": {{ slack_channel_id | json }},\n        \"text\": \"Slack Integration Test\",\n        \"blocks\": [\n          {\n            \"type\": \"header\",\n            \"text\": {\n              \"type\": \"plain_text\",\n              \"text\": \"üéâ Your Slack Integration is Working!\"\n            }\n          },\n          {\n            \"type\": \"section\",\n            \"text\": {\n              \"type\": \"mrkdwn\",\n              \"text\": \"Great job setting up the Slack integration! Here's what I can do:\"\n            }\n          },\n          {\n            \"type\": \"section\",\n            \"fields\": [\n              {\n                \"type\": \"mrkdwn\",\n                \"text\": \"*‚úÖ Send Messages*\\nSend messages as @mechanic\"\n              },\n              {\n                \"type\": \"mrkdwn\",\n                \"text\": \"*#Ô∏è‚É£ Post to Public Channels*\\nSend messages to public channels the app isn‚Äôt a member of\"\n              },\n              {\n                \"type\": \"mrkdwn\",\n                \"text\": \"*üìë Upload Files*\\nUpload, edit, and delete files as @mechanic\"\n              },\n              {\n                \"type\": \"mrkdwn\",\n                \"text\": \"*üë®üèΩ‚Äçüîß Customize Messages*\\nSend messages with a customized username and avatar\"\n              }\n            ]\n          },\n          {\n            \"type\": \"divider\"\n          },\n          {\n            \"type\": \"section\",\n            \"text\": {\n              \"type\": \"mrkdwn\",\n              \"text\": \"*Shop Details:*\\n‚Ä¢ Name: {{ shop.name }}\\n‚Ä¢ Domain: {{ shop.domain }}\\n‚Ä¢ Email: {{ shop.email }}\"\n            },\n            \"accessory\": {\n              \"type\": \"button\",\n              \"text\": {\n                \"type\": \"plain_text\",\n                \"text\": \"Visit Shop\"\n              },\n              \"url\": \"https://{{ shop.domain }}\",\n              \"action_id\": \"button-action\"\n            }\n          }\n        ]\n      }\n    }\n  {% endaction %}\n{% endif %}\n",
  "subscriptions": [
    "mechanic/user/trigger"
  ],
  "subscriptions_template": "mechanic/user/trigger",
  "tags": [
    "Demonstration",
    "Integration",
    "Slack"
  ]
}
